A servant of a king removes 3 litres of wine from a full barrel and replaces the stolen amount with water.Then he repeats 
the stolen amount with water. Then he repeats similar theft twice more, each time removing 3 litres of wine and replacing the stolen
amount of water. As a result of this operation, it was found that the strength of the wine had become half of its original value.
What then, is the volume of the barrel?

Solution:

One thing is clear in this puzzle in that that there successive dilutions.Can we come up with some kind of formulaic approach
to solve this puzzle?

Initial Volume (Volume of barrel) be V. After 3 litres are removed by theft we have V - 3. We can think in terms of ratios in
order to denote the strength . We know that after the water addition by the servant, the wine is diluted and we need a ratio to
depict this: It is but naturally, (V-3)/V. S1 = (V-3)/V.

Now, 3 litres of this diluted wine is again taken . Essentially means 3S1 ( strength X volume ) is taken out.That is 3(V-3)/V.

Actual amount of wine in the barrel is V2 = (V - 3 - 3S1)/V and again water is filled. So S2 the strength now is 
S2 = V2/V = ( V - 3 - 3(V-3)/V)/V = 1 - 6/V + 9/V^2

After the third removal and subsequent dilution with water, V3 = V2 - 3S2 and the strength now is S3 = V3/V = (V2-3S2)/V

 = [(V-3-3S1)/V - 3(1-6/V + 9/V^2)]/V = [(V-3-3(V-3)/V /V - 3(1-6/V + 9/V^2)]/V ] and on further simplifying we get
 = 1/V^3 [ V^3 - 9 V^2 + 27 V - 27] = (V-3)^3/V^3 . This was found to be half.
 
 So we get (V-3)^3/V^3 = 1/2 
 
 And now V-3/V = (1/2) ^(1/3) = 0.7937 or V = 3 / (0.2063) = 14.542 litres.
 
 The main thing in this puzzle was to get the strength X volume at every iteration and keep simplifying.
